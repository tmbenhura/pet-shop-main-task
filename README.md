
## Pet Shop API Submission

Submission has the following:
- Implementation of JWT Authentication
- Implementation of Database Seeders and Reset
- Implementation of [Swagger Documentation](https://localhost/public/docs/index.html) found at [/public/docs/index.html](https://localhost/public/docs/index.html)
- Implementation of Order Status Notifications

## Installation

Before installing, an additional package for notifications is required to be present on the filesystem.
The git cloning of this package and a composer install can be executed sequentially using the command: 

```bash
composer full-install
```

Or,

Should the above fail, due to permissions or other issues, the steps will need to be executed seperately as outlined below.

The additional package should reside in the parent folder of this application and can be fetched via:
```bash
cd ..
git clone https://github.com/tmbenhura/pet-shop-order-status-notifications.git
```

Returning to the application directory, you may now run your composer install.

```bash
cd ../pet-shop-main-task
composer install
```

## Configuration

To allow out-of-the-box use, the API ships with a default signing key, jwt-signing-key.pem, set on first install.
A new signing can be generated by running the command:

```bash
composer jwt-signing-key
```

or,
a new RSA signing key file can be set in the .env:
```bash
JWT_SIGNING_KEY_FILENAME=jwt-signing-key.pem
```

A default verification key is set and can be replaced:
```bash
JWT_VERIFICATION_KEY="mBC5v1sOKVvbdEitdSBenu59nfNfhwkedkJVNabosTw="
```

## Database
The database configuration assumes MySQL defaults and a schema named "pet_shop_main_task", it may need to be reconfigured.

The database also requires migration and seeding:

```bash
php artisan migrate --seed
```

The database can be restored to this initial seeded state by running:

```bash
php artisan db:reset
```

## Order Status Notifications
An additional package for notifications is required to be present before running composer install.
It should reside in the parent folder of this application and can be fetched via:
```bash
cd ..
git clone https://github.com/tmbenhura/pet-shop-order-status-notifications.git
```

The webhook for order status notifications needs to be setup, this endpoint will receive a JSON post:

```bash
OSN_WEBHOOK_URL=https://webhook.site/...
```

The Order model to be monitored for status changes can be changed, if the need arises:

```bash
OSN_MODEL="\\App\\Models\\Order"
```

## API Documentation
Swagger documentation for the API can be found at [/public/docs/index.html](https://localhost/public/docs/index.html)

Documentation can be re-generated by running the command:

```bash
composer docs
```